<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Setlist arrangement for worship songs">
    <meta name="view-transition" content="same-origin">
    <title>Setlist - Setalight</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="app-container">
        <div id="song-view" class="view">
            <header>
                <div class="header-left">
                    <a href="/" class="home-button" aria-label="Home">üè†</a>
                    <div class="song-title-compact" id="song-title-header">Loading...</div>
                </div>
                <div class="header-center">
                    <button class="reset-button edit-mode-control" id="reset-button" aria-label="Reset song">‚Ü∫</button>
                    <div class="font-size-controls edit-mode-control">
                        <button class="font-size-btn" id="font-size-decrease" aria-label="Decrease font size">A‚àí</button>
                        <button class="font-size-btn" id="font-size-increase" aria-label="Increase font size">A+</button>
                    </div>
                    <!-- Key display/selector (same button for both modes) -->
                    <div class="key-display-wrapper">
                        <label class="meta-label">Key:</label>
                        <button id="key-selector-button" class="key-selector" popovertarget="key-selector-popover">
                            <span id="key-selector-value">-</span>
                        </button>
                        <div id="key-selector-popover" class="key-popover" popover>
                            <div id="key-options-list" class="key-options-list">
                                <!-- Options populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    <div class="song-meta-compact" id="song-meta-header"></div>
                </div>
                <div class="header-right">
                    <button class="edit-mode-toggle" id="edit-mode-toggle" aria-label="Toggle edit mode">‚úé</button>
                    <button class="info-button" id="info-button" aria-label="Song info">i</button>
                </div>
            </header>

            <main id="main-content">
                <div class="song-container">
                    <p>Loading setlist...</p>
                </div>
            </main>
        </div>

        <!-- Song info modal -->
        <div class="modal-overlay" id="song-info-modal">
            <div class="modal-content">
                <button class="modal-close" id="modal-close">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>

        <!-- Reset confirmation modal -->
        <div class="modal-overlay" id="reset-confirm-modal">
            <div class="modal-content">
                <h2>Reset Song?</h2>
                <p>This will reset the key, BPM, font size, and all section states back to defaults. This cannot be undone.</p>
                <div class="modal-actions">
                    <button class="modal-btn modal-btn-cancel" id="reset-cancel">Cancel</button>
                    <button class="modal-btn modal-btn-confirm" id="reset-confirm">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Template for key option item -->
    <template id="key-option-template">
        <button class="key-option-item">
            <span class="key-name"></span>
            <span class="key-offset"></span>
        </button>
    </template>

    <!-- Template for song info modal item -->
    <template id="song-info-item-template">
        <div class="modal-info-item">
            <div class="modal-info-label"></div>
            <div class="modal-info-value"></div>
        </div>
    </template>

    <script type="module" src="/js/setlist-app.js"></script>
</body>
</html>
